name: Notify Discord on PR Merge to Master

on:
  push:
    branches:
      - test-notify

concurrency:
  group: merged-to-${{ github.ref_name }}
  cancel-in-progress: true

jobs:
  discord-notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord
        uses: rjstone/discord-webhook-notify@v2
        with:
          webhookUrl: ${{ secrets.DISCORD_PR_WEBHOOK }}
          username: "MagBridge CI"
          avatarUrl: "https://raw.githubusercontent.com/mag-bros/mag-bridge/assets-v1.2/.github/assets/sukces.png"
          color: "#ba005b"
          title: "üôà Pull request merged to Master"
          description: "**Author:** `test`"
          details: "üìÅ **PR title:** test\n‚ú® **PR number:** test"
          footer: "MagBridge CI ‚Ä¢ ${{ github.event.head_commit.timestamp || github.event.pushed_at || 'unknown' }}"